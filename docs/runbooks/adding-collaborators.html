<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Adding collaborators to Modernisation Platform accounts - MoJ Modernisation Platform</title>

    <link href="../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://user-guide.modernisation-platform.service.justice.gov.uk/runbooks/adding-collaborators.html">

      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="user-guide.modernisation-platform.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://user-guide.modernisation-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="Adding collaborators to Modernisation Platform accounts - MoJ Modernisation Platform" />
      <meta name="twitter:url" content="https://user-guide.modernisation-platform.service.justice.gov.uk/runbooks/adding-collaborators.html" />

      <meta property="og:image" content="https://user-guide.modernisation-platform.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="MoJ Modernisation Platform" />
      <meta property="og:title" content="Adding collaborators to Modernisation Platform accounts" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://user-guide.modernisation-platform.service.justice.gov.uk/runbooks/adding-collaborators.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          MoJ Modernisation Platform
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/modernisation-platform">Home</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/modernisation-platform">GitHub</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://mojdt.slack.com/archives/C01A7QK5VM1">Slack</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://user-guide.modernisation-platform.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#adding-collaborators-to-modernisation-platform-accounts"><span>Adding collaborators to Modernisation Platform accounts</span></a>
    <ul>
      <li>
        <a href="#access-to-our-github-repositories"><span>Access to our Github repositories</span></a>
      </li>
      <li>
        <a href="#access-to-the-relevant-aws-accounts"><span>Access to the relevant AWS accounts</span></a>
        <ul>
          <li>
          </li>
        </ul>
      </li>
      <li>
        <a href="#access-to-be-able-to-approve-deployments"><span>Access to be able to approve deployments</span></a>
      </li>
      <li>
        <a href="#removing-collaborators"><span>Removing collaborators</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="adding-collaborators-to-modernisation-platform-accounts">Adding collaborators to Modernisation Platform accounts</h1>
<p>Collaborators are defined as GitHub users which are not part of the <code>ministryofjustice</code> GitHub organisation.
Users who are part of the organisation are added to the platform by joining a <a href="../user-guide/creating-environments.html#github-team-slug">GitHub team</a>.</p>
<p>To enable collaborators to use the Modernisation Platform we need to give them the following access:</p>

<ul>
<li>Access to our Github repositories</li>
<li>Access to the relevant AWS accounts</li>
<li>Access to be able to approve deployments</li>
</ul>
<h2 id="access-to-our-github-repositories">Access to our Github repositories</h2>
<p>In order to create infrastructure, collaborators will need to have <code>push</code> permissions to the following repositories:</p>

<ul>
<li><a href="https://github.com/ministryofjustice/modernisation-platform-environments">modernisation-platform-environments</a></li>
<li><a href="https://github.com/ministryofjustice/modernisation-platform-ami-builds">modernisation-platform-ami-builds</a> (only needed if building AMIs)</li>
</ul>
<p>Please follow the instructions in the MoJ <a href="https://github.com/ministryofjustice/github-collaborators">github-collaborators</a> repository on how to add them.</p>
<p>Under &ldquo;reason&rdquo; please put the name of the Modernisation Platform application that they require access to.</p>
<h2 id="access-to-the-relevant-aws-accounts">Access to the relevant AWS accounts</h2>
<p>Add the collaborators to the <a href="https://github.com/ministryofjustice/modernisation-platform/collaborators.json">collaborators.json</a> file.</p>
<p>Valid access levels are <code>read-only</code> (read only access) and <code>developer</code> (read only plus additional permissions detailed <a href="../user-guide/creating-environments.html#developer">here</a>)</p>
<p>The modernisation-platform-account workflow will create the users when a pull request with these changes is merged.</p>
<p>Once their IAM user has been created, log into the AWS console yourself and:</p>

<ul>
<li>switch into the superadmin role in the Modernisation Platform account</li>
<li>go to their IAM user in IAM Users</li>
<li>go to the Security Credentials tab</li>
<li>configure console access with an autogenerated password. Note a user can only update their password once MFA has been enbled.</li>
<li>the user will need to assign an MFA device on first log in</li>
<li>the user will need to log out and back in to finish enabling MFA</li>
<li>the user can go to the Security Credentials tab to change password</li>
</ul>
<h4 id="example-file-entries">Example file entries</h4>
<div class="highlight"><pre class="highlight plaintext" tabindex="0"><code>{
  "users": [
    {
      "username": "test-collaborator-1",
      "github-username": "test-github-1",
      "accounts": [
        {
          "account-name": "sprinkler-development",
          "access": "read-only"
        },
        {
          "account-name": "sprinkler-development",
          "access": "developer"
        },
        {
          "account-name": "testing-test",
          "access": "read-only"
        }
      ]
    },
    {
      "username": "test-collaborator-2",
      "github-username": "test-git-2",
      "accounts": [
        {
          "account-name": "sprinkler-development",
          "access": "read-only"
        }
      ]
    }
  ]
}
</code></pre></div><h4 id="diagram">Diagram</h4>
<p><a href="../images/collaborators.png" rel="noopener noreferrer"><img src="../images/collaborators.png" alt="Collaborators" /></a></p>
<h2 id="access-to-be-able-to-approve-deployments">Access to be able to approve deployments</h2>
<p>The limit of the number of reviewers (teams or users) which can be added to a GitHub environment is <a href="https://docs.github.com/en/rest/reference/deployments#create-or-update-an-environment--parameters">six</a>.
Two of these spaces will be taken by the application GitHub team and by the Modernisation Platform GitHub team leaving only four spaces to add collaborators.
For this reason collaborator environment reviewers should be manually added to the environment. (Note - the reviewer will be automatically removed when the collaborators permissions to the repository are removed.)</p>

<ol>
<li>Navigate to <a href="https://github.com/ministryofjustice/modernisation-platform-environments/settings/environments">modernisaton-platform-environments -&gt; settings -&gt; environments</a></li>
<li>Find the required environment and click on it</li>
<li>Under <code>Environment protection rules</code> add the required collaborators</li>
<li>Click <code>Save protection rules</code></li>
</ol>
<h2 id="removing-collaborators">Removing collaborators</h2>
<p>To remove collaborators reverse the above steps.</p>
<p>In order to remove the collaborator IAM user, the Terraform in <code>modernisation-platform/terraform/modernisation-platform-account</code> must be run locally as a <code>superadmin</code> user, as the pipelines do not have permissions to delete users.</p>

              <div data-module='page-expiry' data-last-reviewed-on="2022-11-24">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 24 May 2022.

        It needs to be reviewed again on 24 November 2022
        by the page owner <a href="https://mojdt.slack.com/messages/modernisation-platform">#modernisation-platform</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 24 November 2022
       by the page owner <a href="https://mojdt.slack.com/messages/modernisation-platform">#modernisation-platform</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/modernisation-platform/blob/main/source/runbooks/adding-collaborators.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/modernisation-platform/issues/new?body=Problem+with+%27Adding+collaborators+to+Modernisation+Platform+accounts%27+%28https%3A%2F%2Fuser-guide.modernisation-platform.service.justice.gov.uk%2Frunbooks%2Fadding-collaborators.html%29&amp;labels=bug&amp;title=Re%3A+%27Adding+collaborators+to+Modernisation+Platform+accounts%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/modernisation-platform">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../javascripts/application.js"></script>
  </body>
</html>
